<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanggar CEO: Financial Logic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto Mono', monospace;
            background-color: #0f172a;
            color: #e2e8f0;
            overflow: hidden;
        }

        /* Stats Bar Animation */
        .stat-fill {
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Card Animations */
        .card-enter {
            animation: slideIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .pulse-red {
            animation: pulseRed 2s infinite;
        }

        @keyframes pulseRed {
            0% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }

        /* Floating Text for Money Changes */
        .float-text {
            position: absolute;
            font-weight: bold;
            animation: floatUp 1.5s ease-out forwards;
            pointer-events: none;
            z-index: 50;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0);
                opacity: 1;
            }

            100% {
                transform: translateY(-50px);
                opacity: 0;
            }
        }

        .btn-choice:active {
            transform: scale(0.98);
            background-color: #1e293b;
        }
    </style>
</head>

<body class="h-screen w-full flex flex-col items-center justify-center relative">

    <!-- Background Pattern -->
    <div
        class="absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900 via-gray-900 to-black pointer-events-none">
    </div>

    <!-- HUD (Heads Up Display) -->
    <div class="w-full max-w-lg fixed top-0 bg-gray-900/90 border-b border-gray-700 p-4 z-20 backdrop-blur-md">
        <div class="flex justify-between items-center mb-2">
            <h1 class="text-xs font-bold text-indigo-400 uppercase tracking-[0.2em]">Laporan Keuangan</h1>
            <span class="text-xs text-gray-500">BULAN <span id="month-display" class="text-white">1</span>/6</span>
        </div>

        <div class="space-y-3">
            <!-- Cash Flow -->
            <div>
                <div class="flex justify-between text-xs mb-1">
                    <span>Arus Kas (Cash)</span>
                    <span id="cash-text" class="text-emerald-400 font-bold">Rp 10.000.000</span>
                </div>
                <div class="w-full bg-gray-800 h-2 rounded-full overflow-hidden">
                    <div id="bar-cash" class="h-full bg-emerald-500 stat-fill" style="width: 50%"></div>
                </div>
            </div>

            <!-- Asset/Quality -->
            <div>
                <div class="flex justify-between text-xs mb-1">
                    <span>Aset & Kualitas</span>
                    <span id="asset-text" class="text-blue-400 font-bold">Standar</span>
                </div>
                <div class="w-full bg-gray-800 h-2 rounded-full overflow-hidden">
                    <div id="bar-asset" class="h-full bg-blue-500 stat-fill" style="width: 50%"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Area -->
    <div id="game-container"
        class="flex-1 w-full max-w-lg flex flex-col justify-center items-center p-6 mt-16 pb-24 relative">

        <!-- Scenario Card -->
        <div id="scenario-card"
            class="bg-gray-800 border border-gray-600 p-6 rounded-2xl shadow-2xl w-full card-enter relative overflow-hidden">
            <!-- Decorative Icon Background -->
            <div class="absolute -right-10 -top-10 text-9xl opacity-5 pointer-events-none" id="bg-icon">üí∞</div>

            <div class="mb-6">
                <span class="bg-gray-700 text-gray-300 text-[10px] px-2 py-1 rounded uppercase font-bold tracking-wide"
                    id="scenario-tag">Masalah Operasional</span>
                <h2 class="text-xl font-bold mt-3 leading-tight text-white" id="scenario-title">Judul Skenario</h2>
                <p class="text-sm text-gray-400 mt-2 leading-relaxed" id="scenario-desc">Deskripsi masalah akan muncul
                    di sini.</p>
                <div class="mt-4 p-3 bg-gray-900/50 rounded border-l-2 border-red-500">
                    <p class="text-[10px] text-red-400 uppercase">Biaya Operasional Bulan Ini:</p>
                    <p class="text-sm font-bold text-red-500">- Rp 2.000.000</p>
                </div>
            </div>

            <!-- Choices -->
            <div class="space-y-3" id="choices-container">
                <!-- Buttons injected via JS -->
            </div>
        </div>

    </div>

    <!-- Feedback Modal -->
    <div id="feedback-overlay"
        class="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-6 hidden backdrop-blur-sm">
        <div class="bg-gray-800 border-2 border-indigo-500 p-6 rounded-xl max-w-sm w-full text-center relative">
            <div class="text-4xl mb-3" id="fb-icon">‚öñÔ∏è</div>
            <h3 class="text-lg font-bold text-white mb-2" id="fb-title">Keputusan Dibuat</h3>
            <p class="text-sm text-gray-300 mb-6" id="fb-desc">Analisis keputusan...</p>
            <button onclick="nextTurn()"
                class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded transition-colors">LANJUT
                BULAN DEPAN</button>
        </div>
    </div>

    <!-- Game Over / Win Screen -->
    <div id="end-screen"
        class="fixed inset-0 bg-black z-50 flex flex-col items-center justify-center p-8 hidden text-center">
        <h1 id="end-title" class="text-4xl font-bold mb-4 text-red-500 uppercase tracking-widest glitch">BANGKRUT</h1>
        <p id="end-reason" class="text-gray-400 max-w-md mb-8 leading-relaxed">Alasan kekalahan Anda.</p>
        <div class="grid grid-cols-2 gap-4 w-full max-w-xs text-left bg-gray-900 p-4 rounded mb-8">
            <div>
                <span class="text-[10px] text-gray-500 uppercase">Saldo Akhir</span>
                <p id="end-cash" class="text-xl text-white font-bold">Rp 0</p>
            </div>
            <div>
                <span class="text-[10px] text-gray-500 uppercase">Status Aset</span>
                <p id="end-asset" class="text-xl text-white font-bold">0%</p>
            </div>
        </div>
        <button onclick="location.reload()"
            class="bg-white text-black font-bold px-8 py-3 rounded hover:bg-gray-200 transition-transform hover:scale-105">COBA
            LAGI</button>
    </div>

    <script>
        // --- GAME LOGIC ---

        // Initial State
        const INITIAL_CASH = 10000000; // 10 Juta Modal Awal
        let state = {
            cash: INITIAL_CASH,
            asset: 50, // 0-100
            month: 1,
            maxMonths: 6,
            monthlyOpEx: 2000000 // Biaya operasional rutin (listrik, sewa, admin)
        };

        const formatRupiah = (num) => "Rp " + num.toLocaleString('id-ID');

        // Scenarios
        // Urutan: Pricing, Project Cashflow, Investment, Friend Price, Emergency, Final
        const scenarios = [
            {
                tag: "STRATEGI HARGA",
                title: "Penentuan Harga Workshop",
                desc: "Anda membuka kelas tari. Kompetitor jual murah (Rp 50rb/org). Biaya sewa tempat & pelatih pro itu mahal. Bagaimana Anda menentukan harga?",
                choices: [
                    {
                        text: "Ikut harga pasar (Rp 50rb). Biar ramai dulu, rugi dikit gapapa.",
                        effect: { cash: 1000000, asset: -10 }, // Omzet kecil, aset (tenaga) terkuras
                        feedback: { title: "BONCOS!", desc: "Anda sibuk tapi miskin. Harga murah tidak menutup biaya sewa & tenaga pro. Margin Anda negatif." }
                    },
                    {
                        text: "Harga Premium (Rp 250rb). Target ekspatriat/eksekutif.",
                        effect: { cash: 5000000, asset: 10 }, // Omzet besar, brand naik
                        feedback: { title: "CERDAS!", desc: "Volume kecil tapi margin tebal. Anda bekerja lebih sedikit untuk uang lebih banyak." }
                    }
                ]
            },
            {
                tag: "ARUS KAS (CASHFLOW)",
                title: "Proyek Pemerintah Besar",
                desc: "Dinas Kebudayaan menawari proyek Festival senilai Rp 50 Juta! TAPI, dana cair 3 bulan setelah acara (Termin Mundur). Anda butuh Rp 15 Juta di depan untuk produksi.",
                choices: [
                    {
                        text: "Gaskeun! Kapan lagi dapat proyek besar. Pakai dana kas dulu.",
                        effect: { cash: -15000000, asset: 20 }, // Cash minus besar
                        feedback: { title: "BAHAYA MAUT!", desc: "Profit di kertas besar, tapi Cashflow Anda mati. Anda tidak bisa bayar operasional bulan depan." }
                    },
                    {
                        text: "Tolak halus jika tanpa DP 50%. Cari proyek swasta yang cash keras.",
                        effect: { cash: 3000000, asset: 0 }, // Cash aman, profit moderat
                        feedback: { title: "REALISTIS.", desc: "Lebih baik profit kecil tapi uangnya ada, daripada omzet raksasa tapi uangnya gaib." }
                    }
                ]
            },
            {
                tag: "INVESTASI & ASET",
                title: "Rezeki Nomplok",
                desc: "Ada profit sisa Rp 5 Juta bulan lalu. Mau diapakan uang ini?",
                choices: [
                    {
                        text: "Beli kostum/alat baru untuk upgrade kualitas show.",
                        effect: { cash: -5000000, asset: 30 }, // Investasi aset
                        feedback: { title: "INVESTASI BAGUS.", desc: "Mengubah uang tunai menjadi Aset Produktif yang bisa disewakan mahal nanti." }
                    },
                    {
                        text: "Syukuran makan-makan tim biar semangat.",
                        effect: { cash: -5000000, asset: 5 }, // Burn rate
                        feedback: { title: "PEMBOROSAN.", desc: "Moral penting, tapi ini bukan startup bakar duit. Kas harus dijaga untuk masa paceklik." }
                    }
                ]
            },
            {
                tag: "BATASAN PROFESIONAL",
                title: "Teman Minta Diskon",
                desc: "Teman lama minta dibuatkan souvenir nikahan. 'Harga teman lah, kan kita dukung budaya lokal'. Dia minta diskon 50%.",
                choices: [
                    {
                        text: "Kasih aja. Ga enak sama teman.",
                        effect: { cash: 500000, asset: -5 }, // Cuma balik modal/rugi
                        feedback: { title: "LEMBEK!", desc: "Bisnis adalah bisnis. Memberi diskon pada teman artinya Anda mensubsidi pernikahan mereka dengan keringat Anda." }
                    },
                    {
                        text: "Tolak. Beri harga normal atau bonus kecil saja.",
                        effect: { cash: 2000000, asset: 5 },
                        feedback: { title: "TEGAS.", desc: "Teman yang baik akan membayar harga penuh untuk mendukung bisnis Anda." }
                    }
                ]
            },
            {
                tag: "DANA DARURAT",
                title: "Alat Produksi Rusak",
                desc: "Komputer desain atau alat musik utama rusak mendadak. Biaya servis Rp 3 Juta.",
                choices: [
                    {
                        text: "Perbaiki segera. Ambil dari Kas.",
                        effect: { cash: -3000000, asset: 10 },
                        feedback: { title: "PENTING.", desc: "Inilah gunanya menjaga likuiditas. Masalah selesai karena ada uang tunai." }
                    },
                    {
                        text: "Tunda dulu. Pakai alat seadanya.",
                        effect: { cash: 0, asset: -30 }, // Kualitas jatuh drastis
                        feedback: { title: "REPUTASI HANCUR.", desc: "Kualitas produk turun, klien komplain. Kerugian jangka panjang lebih besar dari biaya servis." }
                    }
                ]
            },
            {
                tag: "FINAL TEST",
                title: "Ekspansi Bisnis",
                desc: "Bisnis stabil. Ada tawaran sewa ruko strategis, tapi mahal. Uang pas-pasan.",
                choices: [
                    {
                        text: "Nekat ambil. Biar kelihatan bonafide.",
                        effect: { cash: -10000000, asset: 20 },
                        feedback: { title: "JUDI.", desc: "Jika penjualan tidak langsung meledak, Anda mati konyol bulan depan karena beban sewa." }
                    },
                    {
                        text: "Tahan. Optimalisasi online dulu.",
                        effect: { cash: 2000000, asset: 5 },
                        feedback: { title: "BIJAK.", desc: "Jangan tinggikan gaya hidup (sewa ruko) sebelum arus kas benar-benar banjir." }
                    }
                ]
            }
        ];

        // --- DOM Elements ---
        const ui = {
            cashText: document.getElementById('cash-text'),
            barCash: document.getElementById('bar-cash'),
            assetText: document.getElementById('asset-text'),
            barAsset: document.getElementById('bar-asset'),
            monthDisplay: document.getElementById('month-display'),

            card: document.getElementById('scenario-card'),
            tag: document.getElementById('scenario-tag'),
            title: document.getElementById('scenario-title'),
            desc: document.getElementById('scenario-desc'),
            choices: document.getElementById('choices-container'),

            overlay: document.getElementById('feedback-overlay'),
            fbIcon: document.getElementById('fb-icon'),
            fbTitle: document.getElementById('fb-title'),
            fbDesc: document.getElementById('fb-desc'),

            endScreen: document.getElementById('end-screen'),
            endTitle: document.getElementById('end-title'),
            endReason: document.getElementById('end-reason'),
            endCash: document.getElementById('end-cash'),
            endAsset: document.getElementById('end-asset')
        };

        // --- Functions ---

        function updateHUD() {
            ui.cashText.innerText = formatRupiah(state.cash);
            ui.assetText.innerText = state.asset + "%";
            ui.monthDisplay.innerText = state.month;

            // Bar Widths (Max Cash visual reference 20jt)
            let cashPercent = Math.min((state.cash / 20000000) * 100, 100);
            if (state.cash < 0) cashPercent = 0;

            ui.barCash.style.width = cashPercent + "%";
            ui.barAsset.style.width = state.asset + "%";

            // Color coding
            ui.barCash.className = `h-full stat-fill ${state.cash < 3000000 ? 'bg-red-500' : 'bg-emerald-500'}`;
            ui.cashText.className = state.cash < 3000000 ? 'text-red-500 font-bold pulse-red' : 'text-emerald-400 font-bold';
        }

        function spawnFloatingText(amount, x, y) {
            const el = document.createElement('div');
            el.className = `float-text ${amount >= 0 ? 'text-green-400' : 'text-red-400'}`;
            el.innerText = amount >= 0 ? `+${formatRupiah(amount)}` : formatRupiah(amount);
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1500);
        }

        function loadScenario() {
            // Check Game Over conditions BEFORE loading
            if (state.cash <= 0) {
                gameOver("KAS KOSONG.", "Anda kehabisan uang tunai. Tidak bisa bayar listrik, internet, dan gaji. Game Over.");
                return;
            }
            if (state.asset <= 0) {
                gameOver("KUALITAS SAMPAH.", "Anda berhemat tapi mengorbankan kualitas. Pelanggan kabur. Reputasi hancur.");
                return;
            }
            if (state.month > state.maxMonths) {
                gameWin();
                return;
            }

            const scenario = scenarios[state.month - 1];

            // Animation reset
            ui.card.classList.remove('card-enter');
            void ui.card.offsetWidth; // reflow
            ui.card.classList.add('card-enter');

            ui.tag.innerText = scenario.tag;
            ui.title.innerText = scenario.title;
            ui.desc.innerText = scenario.desc;

            ui.choices.innerHTML = '';
            scenario.choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = "btn-choice w-full bg-gray-700 hover:bg-gray-600 text-left p-4 rounded-lg border border-gray-600 transition-colors flex justify-between items-center group";
                btn.innerHTML = `
                    <span class="text-sm text-gray-200">${choice.text}</span>
                    <span class="text-xl opacity-0 group-hover:opacity-100 transition-opacity">üëâ</span>
                `;
                btn.onclick = (e) => handleChoice(choice, e);
                ui.choices.appendChild(btn);
            });
        }

        function handleChoice(choice, event) {
            // Apply OpEx (Monthly cost)
            state.cash -= state.monthlyOpEx;

            // Apply Choice Effect
            state.cash += choice.effect.cash;
            state.asset += choice.effect.asset;

            // Visual Feedback
            spawnFloatingText(choice.effect.cash - state.monthlyOpEx, event.clientX, event.clientY);
            updateHUD();

            // Show Overlay
            ui.fbIcon.innerText = choice.effect.cash > 0 ? "üìà" : (choice.effect.cash < -2000000 ? "üí∏" : "üìâ");
            ui.fbTitle.innerText = choice.feedback.title;
            ui.fbDesc.innerText = choice.feedback.desc;
            ui.overlay.classList.remove('hidden');
        }

        function nextTurn() {
            ui.overlay.classList.add('hidden');
            state.month++;
            updateHUD();
            loadScenario();
        }

        function gameOver(title, reason) {
            ui.endScreen.classList.remove('hidden');
            ui.endTitle.innerText = title;
            ui.endReason.innerText = reason;
            ui.endCash.innerText = formatRupiah(state.cash);
            ui.endAsset.innerText = state.asset + "%";
        }

        function gameWin() {
            ui.endScreen.classList.remove('hidden');
            ui.endTitle.innerText = "SULTAN BUDAYA!";
            ui.endTitle.className = "text-4xl font-bold mb-4 text-emerald-500 uppercase tracking-widest";
            ui.endReason.innerText = "Selamat! Anda berhasil bertahan selama 6 bulan dengan Arus Kas positif. Anda telah membuktikan bahwa Budaya bisa menghidupi jika dikelola dengan logika bisnis yang benar.";
            ui.endCash.innerText = formatRupiah(state.cash);
            ui.endAsset.innerText = state.asset + "%";
        }

        // Start
        updateHUD();
        loadScenario();

    </script>
</body>

</html>